<html>
	<!-- <script src='https://surikov.github.io/webaudiofont/npm/dist/WebAudioFontPlayer.js'></script> -->
		<script type="text/javascript" src="js/WebAudioFontPlayer.js"></script>
		<script src='https://surikov.github.io/webaudiofontdata/sound/0000_SBLive_sf2.js'></script>
        <script src='https://surikov.github.io/webaudiofontdata/sound/0320_Aspirin_sf2_file.js'></script>
        <script src='https://surikov.github.io/webaudiofontdata/sound/0730_Chaos_sf2_file.js'></script>
        
        <!-- <script src='https://surikov.github.io/webaudiofontdata/sound/12835_16_JCLive_sf2_file.js'></script> -->
        <script type="text/javascript" src="js/gjt_player.js"></script>
        <!-- workbench initialises audio manager -->
        <script type="text/javascript" src="js/audioManager.js"></script>
        <!-- workbench also needs to initialise audio sources -->
        <script type="text/javascript" src="js/audioSources.js"></script>
        <!-- workbench loads metronome -->
        <script type="text/javascript" src="metronome_js/metronome.js"></script>
        <script type="text/javascript" src="js/main.js"></script>
		<!-- <script src='WebAudioFontPlayer.js'></script> -->
		<!-- <script src='soundfonts_js/piano.js'></script> -->
		<script>
			// var AudioContextFunc = window.AudioContext || window.webkitAudioContext;
			// var audioContext = new AudioContextFunc();
			var audioContext = audioManager.audioContext;
			// var piano_player = new WebAudioFontPlayer();
            // var bass_player = new WebAudioFontPlayer();
            var drums_player = new WebAudioFontPlayer();
            // var flute_player = new WebAudioFontPlayer();
			var piano_player = prepare_instrument_player_with_index(5);
			var bass_player = prepare_instrument_player_with_index(366);
			var flute_player = prepare_instrument_player_with_index(772);
            var marimba_player = new WebAudioFontPlayer();
            var guitar_player = new WebAudioFontPlayer();
			console.log('load_all_drums 1');
			load_all_drums();
			// // load flute vvv ==================================================
			// var info = flute_player.loader.instrumentInfo(772);
			// console.log('info.variable: ', info.variable);
			// console.log('info.url: ', info.url);
			// flute_player.loader.startLoad(audioContext, info.url, info.variable);
			// flute_player.loader.waitLoad(function() {
			// 	flute_player.loader.decodeAfterLoading(audioContext, info.variable);
			// });
			// load flute ^^^ ==================================================
			// piano_player.loader.decodeAfterLoading(audioContext, '0000_JCLive_sf2_file');
            // bass_player.loader.decodeAfterLoading(audioContext, '0320_Aspirin_sf2_file');
			// flute_player.loader.decodeAfterLoading(audioContext, '0730_Chaos_sf2_file');
            // drums_player.loader.decodeAfterLoading(audioContext, '35_16_JCLive_sf2_file');
			var playstop = false;
			// __SWING_PLAYER__ For running the swing player, you need to assign to the
			// kern file to be played as a string in the kern_string variable
			var kern_string = null; // in this example, the string value is assigned with the following function:
			// readTextFile('kern_files/study61.krn');
			// readTextFile('kern_files/AIN_T_MISBEHAVIN_.krn');
			readTextFile('kern_files/A_BEAUTIFUL_FRIENDSHIP_2.krn');
			console.log('kern_string:', kern_string)
			// __SWING_PLAYER__ When play is pressed, the following function needs to be called
			// (the kern_string variable needs to has been assigned properly)
			// The play() function acts as toggle, i.e., if you call it while playing, it will stop.
			// There is also a stop function available: stop_player() - in js/gjt_player.js.
			function play(){
				console.log('play:')
				send_kern_request( 'https://maxim.mus.auth.gr:6001/kern_for_player?kernfile=' + encodeURIComponent(kern_string) );
			}
		</script>
	</head>
	<body>
		<p><a href='javascript:play();'>Play - Stop</a></p>
		<div>
			<span id='chord_span'> Chord: </span>
			<span id='chord'> -- </span>
			<span id='chord1_span'>  |  </span>
			<span id='chord1'> -- </span>
			<span id='chord2_span'>  |  </span>
			<span id='chord2'> -- </span>
			<span id='chord3_span'>  |  </span>
			<span id='chord3'> -- </span>
		</div>
	</body>
</html>